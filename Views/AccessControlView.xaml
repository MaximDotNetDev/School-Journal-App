<UserControl x:Class="SchoolJournalApp.Views.AccessControlView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="1000">

    <UserControl.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#E3F2FD" Offset="0"/>
            <GradientStop Color="#E0F7FA" Offset="1"/>
        </LinearGradientBrush>
    </UserControl.Background>

    <Grid Margin="25">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="320"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Margin="0,0,25,0">
            <TextBlock Text="Безпека" FontSize="28" FontWeight="Bold" Foreground="#102A43" Margin="0,0,0,5"/>
            <TextBlock Text="Керування обліковими записами" FontSize="14" Foreground="#546E7A" Margin="0,0,0,25"/>

            <Border Background="White" CornerRadius="15" Padding="20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="20" Opacity="0.05" ShadowDepth="5"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="👥 Оберіть співробітника" FontWeight="SemiBold" Foreground="#0277BD" Margin="0,0,0,10"/>

                    <ListBox x:Name="listEmployees" Height="450" BorderThickness="1" BorderBrush="#E1F5FE" 
                             SelectionChanged="ListEmployees_SelectionChanged" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="{Binding StatusIcon}" Foreground="{Binding StatusColor}" 
                                               FontSize="14" VerticalAlignment="Center" Margin="0,0,10,0"/>

                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="{Binding FullName}" FontWeight="Medium" Foreground="#37474F" TextWrapping="Wrap"/>
                                        <TextBlock Text="{Binding RoleName}" FontSize="11" Foreground="#0277BD" Margin="0,2,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <TextBlock Text="🟢 - Активний акаунт | ⚪ - Немає доступу" 
                               FontSize="11" Foreground="#90A4AE" Margin="0,10,0,0" HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </StackPanel>

        <Border x:Name="AccessCard" Grid.Column="1" Background="White" CornerRadius="20" Padding="40" Visibility="Collapsed">
            <Border.Effect>
                <DropShadowEffect BlurRadius="25" Opacity="0.1" Color="#90A4AE" ShadowDepth="5"/>
            </Border.Effect>

            <StackPanel>
                <Grid Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Width="80" Height="80" CornerRadius="40" Background="#E8EAF6" Margin="0,0,20,0">
                        <TextBlock Text="🔐" FontSize="40" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock x:Name="txtSelectedName" Text="Прізвище Ім'я" FontSize="24" FontWeight="Bold" Foreground="#102A43"/>
                        <TextBlock x:Name="txtSelectedPosition" Text="Посада" FontSize="14" Foreground="#78909C"/>
                    </StackPanel>
                </Grid>

                <Separator Background="#F1F5F9" Margin="0,0,0,25"/>

                <TextBlock Text="🔑 Налаштування входу" FontSize="18" FontWeight="Bold" Foreground="#102A43" Margin="0,0,0,20"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Логін (Username)" Foreground="#546E7A" Margin="0,0,0,5"/>
                        <TextBox x:Name="txtLogin" Height="40" Padding="5" VerticalContentAlignment="Center"
                                 FontSize="16" FontWeight="SemiBold" Foreground="#0277BD" BorderBrush="#B0BEC5"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2">
                        <TextBlock Text="Новий Пароль" Foreground="#546E7A" Margin="0,0,0,5"/>
                        <PasswordBox x:Name="txtPassword" Height="40" Padding="5" VerticalContentAlignment="Center"
                                     FontSize="16" BorderBrush="#B0BEC5"/>
                        <TextBlock Text="* Залиште порожнім, щоб не змінювати" FontSize="10" Foreground="#B0BEC5"/>
                    </StackPanel>
                </Grid>

                <TextBlock Text="🛡️ Рівень прав доступу (Роль)" FontSize="16" FontWeight="Bold" Foreground="#102A43" Margin="0,30,0,10"/>

                <ComboBox x:Name="cmbAccessRole" Style="{StaticResource ModernComboBox}"
                          DisplayMemberPath="RoleName" SelectedValuePath="RoleID"
                          Height="45" FontSize="15" Padding="10" Foreground="#102A43" Margin="0,0,0,30"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="btnRevoke" Content="🗑️ Скасувати доступ" 
                            Background="#FFEBEE" Foreground="#D32F2F" BorderBrush="#FFCDD2" BorderThickness="1"
                            Padding="20,10" Margin="0,0,15,0" FontWeight="Bold" Cursor="Hand"
                            Click="BtnRevoke_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="8"/>
                            </Style>
                        </Button.Resources>
                    </Button>

                    <Button x:Name="btnSave" Content="💾 Зберегти зміни" 
                            Background="#2196F3" Foreground="White" BorderThickness="0"
                            Padding="30,12" FontWeight="Bold" FontSize="14" Cursor="Hand"
                            Click="BtnSave_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="8"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </StackPanel>

                <Border Background="#E1F5FE" CornerRadius="8" Padding="15" Margin="0,30,0,0">
                    <TextBlock Text="ℹ️ Роль визначає, які розділи програми бачитиме користувач. Наприклад, 'Вчитель' бачить лише свої предмети, а 'Адміністратор' — все." 
                               Foreground="#0277BD" TextWrapping="Wrap" FontSize="12" FontStyle="Italic"/>
                </Border>

            </StackPanel>
        </Border>

        <Grid Grid.Column="1" x:Name="NoSelectionMsg" Visibility="Visible">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Opacity="0.6">
                <TextBlock Text="👤" FontSize="70" HorizontalAlignment="Center" Foreground="#B0BEC5"/>
                <TextBlock Text="Оберіть працівника зі списку" FontSize="20" Margin="0,15,0,0" Foreground="#546E7A"/>
            </StackPanel>
        </Grid>

    </Grid>
</UserControl>